<!DOCTYPE html>
<html>
  <head>
    <title>giftGO</title>
    <link rel="stylesheet" href="css/style_layout.css" type="text/css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="bootstrap-4.0.0/dist/css/bootstrap.min.css" type="text/css"> -->
    <link rel="icon" href="img/web_icon.png" type="image/ico" />
  </head>

  <body id="body">
    <!loader>
    <div id="loader" class="loader-background loader-hide">
      <div class="loader-itself">
        <div class="ball-grid-pulse">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
        <div class="loader-text">
          <p >Generating 3D</p>
        </div>
      </div>
    </div>

    <!render space>
    <div id="container" class="renderSpace"></div>

    <!functions>
    <div class="function-container">
      <!-- title logo -->
      <img class="titleIcon" src="img/giftgo_icon_title.png" width="200px" height="80px">

      <!-- upper right corner -->
      <div class="menuGroups">
        <div id="menuGroup1" class="menuGroup menuGroup-show">
          <!--在 chrome 上顯示不出來 需要在每個元件中加上col-md-1 或其他bootstrap class ex:dropdown -->
          <img id="single" class="topMenuIcon" src="img/cube_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top" class="topMenuIcon" src="img/top.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick" class="topMenuIcon" src="img/stick.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake" class="topMenuIcon" src="img/snake.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven" class="topMenuIcon" src="img/seven.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T" class="topMenuIcon" src="img/T.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube" class="topMenuIcon" src="img/4_4-cube.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>

        <!menuGroup_2>
        <!--用了bootstrap grid來排版的話，直接在css中的menuGroup2寫absolute，layout會跑。用bootstrap提供的position-absolute則ok??-->
        <div id="menuGroup2" class="menuGroup menuGroup-hide menuGroup-abs">
          <img id="single2" class="topMenuIcon" src="img/circular_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top2" class="topMenuIcon" src="img/top_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick2" class="topMenuIcon" src="img/stick_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake2" class="topMenuIcon" src="img/snake_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven2" class="topMenuIcon" src="img/seven_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T2" class="topMenuIcon" src="img/T_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube2" class="topMenuIcon" src="img/4_4-cube_2.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>

        <!menuGroup_3>
        <div id="menuGroup3" class="menuGroup menuGroup-hide menuGroup-abs">
          <img id="single3" class="topMenuIcon" src="img/cut_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top3" class="topMenuIcon" src="img/top_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick3" class="topMenuIcon" src="img/stick_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake3" class="topMenuIcon" src="img/snake_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven3" class="topMenuIcon" src="img/seven_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T3" class="topMenuIcon" src="img/T_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube3" class="topMenuIcon" src="img/4_4-cube_3.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>

        <!menuGroup_4>
        <div id="menuGroup4" class="menuGroup menuGroup-hide menuGroup-abs">
          <img id="single4" class="topMenuIcon" src="img/hollow_1_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top4" class="topMenuIcon" src="img/top_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick4" class="topMenuIcon" src="img/stick_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake4" class="topMenuIcon" src="img/snake_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven4" class="topMenuIcon" src="img/seven_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T4" class="topMenuIcon" src="img/T_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube4" class="topMenuIcon" src="img/4_4-cube_4.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>

        <!menuGroup_5>
        <div id="menuGroup5" class="menuGroup menuGroup-hide menuGroup-abs">
          <img id="single5" class="topMenuIcon" src="img/hollow_2_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top5" class="topMenuIcon" src="img/top_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick5" class="topMenuIcon" src="img/stick_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake5" class="topMenuIcon" src="img/snake_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven5" class="topMenuIcon" src="img/seven_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T5" class="topMenuIcon" src="img/T_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube5" class="topMenuIcon" src="img/4_4-cube_5.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>

        <!menuGroup_6>
        <div id="menuGroup6" class="menuGroup menuGroup-hide menuGroup-abs">
          <img id="single6" class="topMenuIcon" src="img/hollow_3_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="top6" class="topMenuIcon" src="img/top_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="stick6" class="topMenuIcon" src="img/stick_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="snake6" class="topMenuIcon" src="img/snake_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="seven6" class="topMenuIcon" src="img/seven_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="T6" class="topMenuIcon" src="img/T_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
          <img id="cube6" class="topMenuIcon" src="img/4_4-cube_6.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Import the default STL">
        </div>
      </div>

      <!-- dropLeft1 -->
      <!mode menu dropLeft>
      <!--須將bootstrap.min.js連結改成CDN才能在chrome中使用-->
      <div class="btn-group dropleft mode-dropLeft1">
        <label class="modeBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><< SOLID</label>

        <div class="dropdown-menu modeMenu-block">
          <img id="mode_cube" class="modeMenu-icon-up" src="img/cube_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Cube mode"><!-- 用以清除看不見的小 gap
       --><img id="mode_circular" class="modeMenu-icon-down" src="img/circular_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Circular mode"><!-- 用以清除看不見的小 gap
       --><img id="mode_cut" class="modeMenu-icon-down" src="img/cut_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Cut mode">
        </div>
      </div>

      <!-- dropLeft2 -->
      <!mode menu dropLeft_2>
      <!--須將bootstrap.min.js連結改成CDN才能在chrome中使用-->
      <div class="btn-group dropleft mode-dropLeft2">
        <label class="modeBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><< HOLLOW</label>

        <div class="dropdown-menu modeMenu-block">
          <img id="mode_hollow_1" class="modeMenu-icon-down" src="img/hollow_1_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow cube mode"><!-- 用以清除看不見的小 gap
       --><img id="mode_hollow_2" class="modeMenu-icon-down" src="img/hollow_2_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow circular mode"><!-- 用以清除看不見的小 gap
       --><img id="mode_hollow_3" class="modeMenu-icon-down" src="img/hollow_3_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow cut mode">
        </div>
      </div>


      <!metrics>
      <div class="countZone">
        <section id="counter" class="countSpace" data-toggle="tooltip" data-placement="top" title="The amount of used objects">
          Object: 0
        </section>
        <section id="blockCounter" class="countSpace" data-toggle="tooltip" data-placement="top" title="You can predict the approximate printing time through the amount of total used blocks">
          Total blocks: 0
        </section>
      </div>


      <!-- dropLeft3 -->
      <!Examples dropLeft_3> <!--須將bootstrap.min.js連結改成CDN才能在chrome中使用-->
      <div class="dropleft mode-dropLeft3">
        <label class="modeBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><< SAMPLES</label>

        <div class="dropdown-menu sampleMenu-block">
          <img id="sample_cup" class="sampleMenu-icon" src="img/sample_cup.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Cup"><!--
       --><img id="sample_headphone-stand" class="sampleMenu-icon" src="img/sample_headphone-stand.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Headphone stand"><!--
       --><img id="sample_pen-holder" class="sampleMenu-icon" src="img/sample_pen-holder.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Pen holder"><!--
       --><img id="sample_plant" class="sampleMenu-icon" src="img/sample_plant.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Pot"><!--
       --><img id="sample_iphone-stand" class="sampleMenu-icon" src="img/sample_iphone-stand.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="iphone stand">
        </div>
      </div>

      <!Functions buttons>
      <!--需在class中加入任一bootstrap所定義之class Ex: dropdown，才能在renderSpace上面顯現-->
      <div class="type-mold">
        <img id="text_mode" class="topMenuIcon" src="img/type_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#solidTextModal" data-placement="bottom" title="3D text on objects">
        <img id="hollow_mode" class="topMenuIcon btn-unavailable" src="img/hollow_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Make it hollow">
        <img id="mold_mode" class="topMenuIcon btn-unavailable" src="img/mold_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Turn your work into a mold">
        <img id="picture_mode" class="topMenuIcon" src="img/picture_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#photoBackColorModal" data-placement="bottom" title="Generate a 3D photo">
        <canvas id="myCanvas" class="topMenuIcon imgCanvas sr-only" height="60px" width="60px"></canvas>
      </div>


    </div>


    <!lower buttons>
    <div class="lowerButton">

      <div class="dropup importBtn">
        <label class="fileBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Import 3D</label>
        <div class="dropdown-menu modeMenu-block-format">
          <input type="file" id="file" class="inputfile" onchange="readSTL(event)">
          <label for="file" class="modeMenu-format-all modeMenu-format-left" data-toggle="tooltip" data-placement="top" title="Choose a STL file from your computer">STL</label>

          <div class="modeMenu-dash"> / </div>
          <!-- <input type="file" id="favFile" class="inputfile" onchange="readFAV(event)"> -->
          <!-- <label for="favFile" class="modeMenu-format-all modeMenu-format-right" data-toggle="tooltip" data-placement="top" title="Choose a FAV file from your computer">FAV</label> -->
          <label class="modeMenu-format-all modeMenu-format-right" data-toggle="modal" data-target="#favModal" data-dismiss="modal" data-placement="top" title="Choose a FAV file from your computer">FAV</label>
        </div>
      </div>

      <label class="fileBtn importBtn" data-toggle="modal" data-target="#exampleModal1" data-placement="top" title="Import a STL file and voxelize it">Voxelize STL</label>
      <!-- <label for="" class="sr-only" .sr-only這個預設class可以隱藏元件，但非display:none; >123</label> -->

      <label id="clearPrevious" class="fileBtn clearBtn" data-toggle="tooltip" data-placement="top" title="Clear the previously imported item">CLEAR PREVIOUS</label>
      <label id="clearSelected" class="fileBtn clearBtn" data-toggle="tooltip" data-placement="top" title="Clear the selected item">CLEAR SELECTED</label>
      <!-- Modal's button trigger -->
      <label class="fileBtn clearBtn" data-toggle="modal" data-target="#exampleModal3" data-placement="top" title="Clear all items and restart">RESTART</label>

      <div class="btn-group dropup mergeBtn">
        <label class="fileBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Export 3D</label>
        <div class="dropdown-menu modeMenu-block-format">

          <form class="modeMenu-format-all modeMenu-format-left" action="/exportSTL" method="post">
            <textarea id="mergedInput" style="display:none;" name="mergedData" value=""></textarea>
            <input id="historyInput" style="display:none;" type="text" name="historyData">
            <input id="timerInput" style="display:none;" type="text" name="timer">
            <input id="hiddenInput" style="display:none;" type="submit">
            <label id="export" style="margin-bottom:0 !important;" data-toggle="tooltip" data-placement="top" title="Export your work as a STL file for 3D printing">STL</label>
          </form>

          <div class="modeMenu-dash"> / </div>

          <label id="exportFAV" class="modeMenu-format-all modeMenu-format-right" data-toggle="tooltip" data-placement="top" title="Export your work as a STL file for 3D printing">FAV</label>
        </div>
      </div>

      <!-- <label id="export" class="fileBtn mergeBtn" data-toggle="tooltip" data-placement="top" title="Export your work as a STL file for 3D printing">Export STL</label> -->
      <!-- <label id="exportFAV" class="fileBtn mergeBtn" data-toggle="tooltip" data-placement="top" title="Export your work as a STL file for 3D printing">Export FAV</label> -->

      <!-- <form class="fileBtn mergeBtn" action="/" method="post">
        <input id="serverInput" style="display:none;" type="text" name="mergedData" value="">
        <label id="merge" type="submit" style="margin-bottom:0 !important" data-toggle="tooltip" data-placement="top" title="Confirm your work and prepare to export">Merge All</label>
      </form> -->

      <!-- <input style="display:none;" type="file" name="file" value=""> -->
      <label id="merge" class="fileBtn mergeBtn" data-toggle="tooltip" data-placement="top" title="Confirm your work and prepare to export">Merge All</label>
    </div>

    <!-- import FAV Modal -->
    <div class="modal fade" id="favModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title  modal-font">Importing FAV model</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body modal-font modalBody-size">
            <p>Please choose the basic brick shape</p>
            <img id="fav_mode_cube" class="voxel-import-icon" src="img/cube_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Cube mode">
            <img id="fav_mode_circular" class="voxel-import-icon" src="img/circular_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Circular mode">
            <img id="fav_mode_cut" class="voxel-import-icon" src="img/cut_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Cut mode">
            <img id="fav_mode_hollow_1" class="voxel-import-icon" src="img/hollow_1_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow cube mode">
            <img id="fav_mode_hollow_2" class="voxel-import-icon" src="img/hollow_2_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow circular mode">
            <img id="fav_mode_hollow_3" class="voxel-import-icon" src="img/hollow_3_mode.png" width="60px" height="60px" data-toggle="tooltip" data-placement="bottom" title="Hollow cut mode">
          </div>

          <div class="modal-footer">
            <button id="cancelImportFAV" type="button" class="modal-continue fileBtn closeBtn" data-dismiss="modal">Close</button>
            <input type="file" id="favFile" class="inputfile" onchange="readFAV(event)">
            <label for="favFile" class="modal-continue fileBtn importBtn" data-toggle="tooltip" data-placement="top" title="Choose a FAV file from your computer">Import FAV</label>
          </div>
        </div>
      </div>
    </div>

    <!-- voxelize STL Modal -->
    <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title  modal-font">Voxelizing the imported STL</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>

          <div class="modal-body modal-font modalBody-size">
            <p>Please choose the basic brick shape</p>
            <img id="voxel_mode_cube" class="voxel-import-icon" src="img/cube_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Cube mode">
            <img id="voxel_mode_circular" class="voxel-import-icon" src="img/circular_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Circular mode">
            <img id="voxel_mode_cut" class="voxel-import-icon" src="img/cut_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Cut mode">
            <img id="voxel_mode_hollow_1" class="voxel-import-icon" src="img/hollow_1_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Hollow cube mode">
            <img id="voxel_mode_hollow_2" class="voxel-import-icon" src="img/hollow_2_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Hollow circular mode">
            <img id="voxel_mode_hollow_3" class="voxel-import-icon" src="img/hollow_3_mode.png" width="60px" height="60px" data-toggle="modal" data-target="#exampleModal2" data-dismiss="modal" data-toggle="tooltip" data-placement="bottom" title="Hollow cut mode">
          </div>

          <div class="modal-footer">
            <button type="button" class="modal-continue fileBtn closeBtn" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Accuracy list Modal(voxelize STL) -->
    <div class="modal fade" id="exampleModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">Resolution of the voxel model</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size">
            <div class="accuracy-btn-set">
              <button id="10AccuracyBtn" type="button" class="importBtn accuracy-degree accuracy-position1">3.5X RES</button>
              <button id="1AccuracyBtn" type="button" class="importBtn accuracy-degree-pressed accuracy-position2">Default RES</button>
              <button id="halfAccuracyBtn" type="button" class="importBtn accuracy-degree accuracy-position3">0.5X RES</button>
            </div>
          </div>
          <div class="modal-footer">
            <button id="closeModalAfterImport" type="button" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <input type="file" id="voxelfile" class="inputfile" onchange="readSTLforVoxel(event)">
            <label for="voxelfile" class="modal-continue fileBtn importBtn" data-toggle="tooltip" data-placement="top" title="Choose a STL file from your computer">Import STL</label>
            <!-- 上面的"modal-footer"已經有justify-content: flex-end;的限制了，justify-content較優先，所以importBtn所帶有的float:left;不影響元件位置 -->
          </div>
        </div>
      </div>
    </div>

    <!-- backgroud color list Modal(3D photo 1) -->
    <div class="modal fade" id="photoBackColorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">What is the backgroud color of your picture?</h5>
            <button type="button" class="close" onclick="cancel(event)" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size modal-body-margin">
            <div class="accuracy-btn-set">
              <button id="blackBack" type="button" class="importBtn accuracy-degree accuracy-position1">Black</button>
              <button id="whiteBack" type="button" class="importBtn accuracy-degree accuracy-position2">White</button>
              <button id="mixedBack" type="button" class="importBtn accuracy-degree accuracy-position3">Others</button>
            </div>
            <div class="sub-selection">
              <div class="sub-selection-item accuracy-position1">
                <div id="natural" class="sub-selection-item sub-selection-circle-pressed"></div>
                <span class="sub-selection-item">Natural</span>
              </div>
              <div class="sub-selection-item accuracy-position3">
                <div id="seperateBack" class="sub-selection-item sub-selection-circle-released"></div>
                <span class="sub-selection-item">Seperate background</span>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <!-- process line -->
            <div class="photo-import-progress-position">
              background <span class="photo-import-progress">/ size / thickness / resolution</span>
            </div>
            <button type="button" class="fileBtn closeBtn" onclick="cancel(event)" data-dismiss="modal">Close</button>
            <button id="3dImageStage1" type="button" onclick="checkAnswer(this)" class="modal-continue fileBtn importBtn" data-stage="first" data-toggle="modal" data-target="#photoSizeModal" data-dismiss="modal">Continue</button>
            <!-- 上面的"modal-footer"已經有justify-content: flex-end;的限制了，所以importBtn所帶有的float:left;不影響元件位置 -->
          </div>
        </div>
      </div>
    </div>

    <!-- size list Modal(3D photo 2) -->
    <div class="modal fade" id="photoSizeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">Please set the size of your 3D picture</h5>
            <button type="button" onclick="cancel(event)" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size modal-body-margin">
            <div class="accuracy-btn-set">
              <p class="modal-sub-title">Recommended size:</p>
              <button id="photoBigSize" type="button" class="importBtn accuracy-degree accuracy-position1">15 x 15cm</button>
              <button id="photoMediumSize" type="button" class="importBtn accuracy-degree accuracy-position2">10 x 10cm</button>
              <button id="photoSmallSize" type="button" class="importBtn accuracy-degree accuracy-position3">5 x 5cm</button>

              <p class="modal-sub-title" style="margin-top:15px">Customized size:</p>

              <div class="inputBox input-margin">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">Height</span>
                  </div>
                  <input id="customSizeH" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="Example: 8" aria-describedby="basic-addon1">
                </div>
              </div>
              <div class="inputBox">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">Width</span>
                  </div>
                  <input id="customSizeW" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="Example: 8" aria-describedby="basic-addon1">
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="photo-import-progress-position">
              <span class="photo-import-progress">background /</span> size <span class="photo-import-progress">/ thickness / resolution</span>
            </div>
            <button type="button" onclick="cancel(event)" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <button id="3dImageStage2" type="button" onclick="checkAnswer(this)" class="modal-continue fileBtn importBtn" data-stage="second" data-toggle="modal" data-target="#photoThicknessModal" data-dismiss="modal">Continue</button>
            <!-- 上面的"modal-footer"已經有justify-content: flex-end;的限制了，所以importBtn所帶有的float:left;不影響元件位置 -->
          </div>
        </div>
      </div>
    </div>

    <!-- photo thickness Modal(3D photo 3) -->
    <div class="modal fade" id="photoThicknessModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">Please set the thickness of your 3D picture</h5>
            <button type="button" onclick="cancel(event)" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size modal-body-margin">
            <div class="accuracy-btn-set">
              <p class="modal-sub-title">Recommended thickness:</p>
              <button id="photoBigThickness" type="button" class="importBtn accuracy-degree accuracy-position1">20mm</button>
              <button id="photoMediumThickness" type="button" class="importBtn accuracy-degree accuracy-position2">10mm</button>
              <button id="photoSmallThickness" type="button" class="importBtn accuracy-degree accuracy-position3">5mm</button>
              <p class="modal-sub-title" style="margin-top:15px">Customized thickness:</p>
              <div class="input-group">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">#</span>
                </div>
                <input id="customThickness" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="One value for photo thickness.  Example: 15" aria-describedby="basic-addon1">
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="photo-import-progress-position">
              <span class="photo-import-progress">background / size /</span> thickness <span class="photo-import-progress">/ resolution</span>
            </div>
            <button type="button" onclick="cancel(event)" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <button id="3dImageStage3" type="button" onclick="checkAnswer(this)" class="modal-continue fileBtn importBtn" data-stage="third" data-toggle="modal" data-target="#voxelResolutionModal" data-dismiss="modal">Continue</button>
            <!-- 上面的"modal-footer"已經有justify-content: flex-end;的限制了，所以importBtn所帶有的float:left;不影響元件位置 -->
            <!-- Note: modal不能召喚出自己這個modal! -->
          </div>
        </div>
      </div>
    </div>

    <!-- voxel resolution Modal(3D photo 4) -->
    <div class="modal fade" id="voxelResolutionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">Please set the resolution of your voxel model</h5>
            <button type="button" onclick="cancel(event)" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size modal-body-margin">
            <div class="accuracy-btn-set">
              <p class="modal-sub-title">Recommended thickness:</p>
              <button id="voxelResolutionBig" type="button" class="importBtn accuracy-degree accuracy-position1">2.25X accuracy</button>
              <button id="voxelResolutionMedium" type="button" class="importBtn accuracy-degree-pressed accuracy-position2">1X accuracy (Default)</button>
              <button id="voxelResolutionSmall" type="button" class="importBtn accuracy-degree accuracy-position3">0.4X accuracy</button>
              <p class="modal-sub-title" style="margin-top:15px">Do you want to seperate your photo into 10*10 pieces?</p>
              <button id="voxelSeperateNo" type="button" class="importBtn accuracy-degree-pressed accuracy-position1">NO (Default)</button>
              <button id="voxelSeperateYes" type="button" class="importBtn accuracy-degree accuracy-position3">YES (Adjustable)</button>
            </div>
            <div id="puzzle-sub" class="sub-selection sub-selection-hide">
              <div class="sub-selection-item accuracy-position1">
                <div id="noGap" class="sub-selection-item sub-selection-circle-pressed"></div>
                <span class="sub-selection-item">Without gap (normal)</span>
              </div>
              <div class="sub-selection-item accuracy-position3">
                <div id="yesGap" class="sub-selection-item sub-selection-circle-released"></div>
                <span class="sub-selection-item">With gap (puzzle)</span>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="photo-import-progress-position">
              <span class="photo-import-progress">background / size / thickness /</span> resolution
            </div>
            <button type="button" id="importModalCancel" onclick="cancel(event)" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <!-- <button id="importImg" type="button" class="fileBtn importBtn" data-stage="fourth" data-dismiss="modal">Import Image</button> -->
            <input type="file" id="imgFile" class="inputfile" onchange="readImgForVoxel(event)">
            <label for="imgFile" class="modal-continue fileBtn importBtn" onclick="checkAnswer(this)" data-stage="fourth" data-toggle="tooltip" data-placement="top" title="Choose a image file from your computer">Import Image</label>
            <!-- checkAnswer()必須要放在label的位置 否則放在input(本身被覆蓋的元件)會最晚被執行 導致photoResolution已成空值 -->
          </div>
        </div>
      </div>
    </div>

    <!-- 3D text Modal -->
    <div class="modal fade" id="solidTextModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">Please set the parameters of your 3D text</h5>
            <button type="button" onclick="removeTextParameter(event)" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size">
            <p class="modal-sub-title">Text content:</p>
            <div class="input-group mb-3">
              <div class="input-group-prepend">
                <span class="input-group-text" id="basic-addon1">T</span>
              </div>
              <input id="textContent" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="The content of the 3D text. Ex: Happy Birthday!" aria-describedby="basic-addon1">
            </div>

            <p class="modal-sub-title">Detailed parameters:</p>

            <div class="inputBox input-margin">
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">Size</span>
                </div>
                <input id="textSize" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="Text size. Ex: 10" aria-describedby="basic-addon1">
              </div>
            </div>

            <div class="inputBox">
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon1">|---|</span>
                </div>
                <input id="textHeight" type="text" class="form-control" style="font-family: gotham book; font-size:12pt;" placeholder="Thickness. Ex: 5" aria-describedby="basic-addon1">
              </div>
            </div>

            <div class="dropdown font-dropDown-position">
              <button class="btn btn-secondary dropdown-toggle fontDropDownBtn-css" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Font
              </button>
              <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                <button id="font1" class="dropdown-item" type="button">Arial</button>
                <button id="font2" class="dropdown-item" type="button">Bodoni</button>
                <button id="font3" class="dropdown-item" type="button">Gentilis</button>
                <!-- <button class="dropdown-item" style="font-family:gentilis regular;" type="button">gentilis regular</button> -->
                <button id="font4" class="dropdown-item" type="button">Helvetiker</button>
                <!-- <button class="dropdown-item" type="button">helvetiker_regular</button> -->
                <button id="font5" class="dropdown-item" type="button">Optimer</button>
                <!-- <button class="dropdown-item" type="button">optimer_regular</button> -->
              </div>
            </div>
            <div id="currentFont" class="font-display">
              Current font: None
            </div>

          </div>
          <div class="modal-footer">
            <button id="textModalCancel" onclick="removeTextParameter(event)" type="button" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <button id="generateText" type="button" class="modal-continue fileBtn importBtn">Generate</button>
            <!-- 上面的"modal-footer"已經有justify-content: flex-end;的限制了，所以importBtn所帶有的float:left;不影響元件位置 -->
          </div>
        </div>
      </div>
    </div>

    <!-- Restart Modal -->
    <div class="modal fade" id="exampleModal3" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title modal-font">WARNING</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body modal-font modalBody-size">
            <p>Are you sure to clear all objects and restart?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="fileBtn closeBtn" data-dismiss="modal">Close</button>
            <button id="clearAll" type="button" class="modal-continue fileBtn clearBtn" data-dismiss="modal">Clear all & Restart</button>
          </div>
        </div>
      </div>
    </div>
    <!-- </div> -->

    <!-- <input type="file" name="file" id="file" class="inputfile" /> -->
    <!-- <label for="file">Choose a file</label> -->
    <!script>
    <script type="text/javascript" src="js/XMLWriter-1.0.0-min.js"></script>
    <script type="text/javascript" src="js/three.min.js"></script>
    <script type="text/javascript" src="js/STLLoader.js"></script>
    <script type="text/javascript" src="js/OrbitControls.js"></script>
    <script type="text/javascript" src="js/STLExporter.js"></script>
    <script type="text/javascript" src="js/BufferGeometryUtils.js"></script>
    <script type="text/javascript" src="js/GeometryUtils.js"></script>
    <script type="text/javascript" src="js/threeCSG.js"></script>
    <script type="text/javascript" src="js/FAVLoader.js"></script>
    <script type="text/javascript" src="js/FAVExporter.js"></script>
    <script type="text/javascript" src="js/ImageLoader.js"></script>
    <script type="text/javascript" src="js/voxelIMG.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
     <!-- <script src="materialize/js/materialize.min.js"></script> -->
    <!-- <script type="text/javascript" src="js/index_layout.js"></script> -->
    <script type="text/javascript" src="js/index_layout.js"></script>
  </body>
</html>
